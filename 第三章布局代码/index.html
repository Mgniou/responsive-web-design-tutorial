<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="./normalize.css">
	<link rel="stylesheet" type="text/css" href="./flexbox.css">
	<!-- <link rel="stylesheet" type="text/css" href="./nav.css"> -->
	<!-- <link rel="stylesheet" type="text/css" href="./nav-mobile.css"> -->
	<link rel="stylesheet" type="text/css" href="./nav-media-query.css">
	<link rel="stylesheet" type="text/css" href="./icomoon/style.css">
</head>
<body>
<nav>
 	<div class="menu-btn">
        <!-- <a href="javascript:void(0)" class="menu-btn-icon btn-icon-close"></a> -->
        <a href="javascript:void(0)" class="menu-btn-icon icon-cross"></a>
        <div class="clearfix"></div>
    </div>
    <!-- <ul class="nav-container-list flex-enable flex-row flex-justify-space-around"> -->
    <ul class="nav-container-list">
        <li class="nav-list-item"><a href="">Item1</a></li>
        <li class="nav-list-item"><a href="">Item2 is a extremely item, here is for test</a></li>
        <li class="nav-list-item">
    	    <a href="">Item3</a>
		    <ul class="nav-submenu-list">
		        <li class="nav-submenu-item"><a href="">SubItem1</a></li>
		        <li class="nav-submenu-item"><a href="">SubItem2</a></li>
		        <li class="nav-submenu-item"><a href="">SubItem3</a></li>
		        <li class="nav-submenu-item"><a href="">SubItem4</a></li>
		    </ul>
        </li>
        <li class="nav-list-item"><a href="">Item4 is also a very long item</a></li>
        <li class="clearfix"></li>
    </ul>
</nav>
<script type="text/javascript">
	var btn = document.querySelector('.menu-btn-icon');
	var menu = document.querySelector('.nav-container-list');
	var menuIsCollapse = false;

	btn.onclick = function () {
	    menuIsCollapse = !menuIsCollapse;           
	    if (menuIsCollapse) {
	        menu.style.display = 'none';
        	
        	btn.classList.remove('icon-cross');
        	btn.classList.add('icon-menu');	        
	        
	        // btn.classList.remove('btn-icon-close');
	        // btn.classList.add('btn-icon-menu');
	    } else {
	        menu.style.display = 'block';
	        
	        btn.classList.remove('icon-menu');
	        btn.classList.add('icon-cross');	        
	        
	        // btn.classList.remove('btn-icon-menu');
	        // btn.classList.add('btn-icon-close');
	    }
	}

	// media query event handler
	// http://caniuse.com/#feat=matchmedia
	// https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia
	// var mql = window.matchMedia("(min-width: 480px)");
	if (window.matchMedia) {
		var mql = window.matchMedia("(min-width: 480px)");
		mql.addListener(mediaChangeHandler);
		mediaChangeHandler(mql);
	} else {
		window.addEventListener('resize', function () {
			var innerWidth = window.innerWidth 
							|| document.documentElement.clientWidth 
							|| document.body.clientWidth;
			mediaChangeHandler(
				innerWidth >= 480
					? {matches: true}
					: {matches: false})
		}, false);
	}


	function mediaChangeHandler(mql) {
		// 匹配成功，导航栏宽度大于480px
		// 则无论如何也显示导航栏	
		if (mql.matches) {
			menu.style.display = '';
		}
		else {
			if (menuIsCollapse) {
				menu.style.display = 'none';
			} else {
				menu.style.display = '';
			}
		}
	}
</script>
</body>
</html>